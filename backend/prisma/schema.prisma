generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admin {
  id Int @id @default(autoincrement())
  name String @unique
  password String
}

model Teacher {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String
  name      String
  language String
  entries Entry[] @relation("TeacherEmail")
  students StudentTeacher[]
  createdAt DateTime @default(now())

}

model Student {
  id String @id @default(uuid())
  email String @unique
  name String
  nickname String
  createdAt DateTime @default(now())
  teachers StudentTeacher[]

}

model Entry {
  id String @id @default(uuid())
  type  String
  student_name String
  course String
  textbook String
  attendance String
  totalLessons String
  feedback String
  dateCreated DateTime @default(now())

  teacherEmail String
  teacher Teacher @relation("TeacherEmail", fields: [teacherEmail], references: [email])
  skills Skill[]

}

model Skill {
  id Int @id @default(autoincrement())
  type String 
  intial String
  target String
  final String
  entryId String
  entry Entry @relation(fields: [entryId], references: [id] )
}

model StudentTeacher {
  id Int @id @default(autoincrement())
  studentId String
  teacherId Int
  assignedAt DateTime @default(now())

  student Student @relation(fields: [studentId], references: [id])
  teacher Teacher @relation(fields: [teacherId], references: [id])

  @@unique([studentId, teacherId]) 
}